# গো গেম (Go Game): টেকনিক্যাল ডকুমেন্টেশন এবং কাজের ধারা

এই ডকুমেন্টটিতে গো গেমের অভ্যন্তরীণ কাজের পদ্ধতি, মানুষ (কালো পাথর) এবং কৃত্রিম বুদ্ধিমত্তা বা এআই (সাদা পাথর) এর মধ্যে কিভাবে যোগাযোগ হয় এবং প্রতিটি ধাপে কোন ফাংশনগুলো কাজ করে তা বিস্তারিতভাবে আলোচনা করা হয়েছে।

---

## ১. সিস্টেম আর্কিটেকচার (System Architecture)

এই প্রজেক্টটি তিনটি প্রধান মডিউলে বিভক্ত:

1.  **`main.py` (GUI ও কন্ট্রোলার):** এটি পাইগেম (Pygame) রেন্ডারিং, মাউস ইনপুট এবং গেমের মূল লুপ নিয়ন্ত্রণ করে।
2.  **`go_logic.py` (রুল ইঞ্জিন):** এটি বোর্ডের অবস্থা, চালের বৈধতা যাচাই, পাথর ক্যাপচার এবং স্কোর গণনা পরিচালনা করে।
3.  **`ai.py` (ইন্টেলিজেন্স):** এটি মিনিম্যাক্স (Minimax) অ্যালগরিদম এবং আলফা-বিটা প্রুনিং (Alpha-Beta pruning) ব্যবহার করে এআই-এর চাল নির্ধারণ করে।

---

## ২. একটি চালের জীবনচক্র (ধাপে ধাপে)

### ক. মানুষের চাল (কালো পাথর)

1.  **ইনপুট শনাক্তকরণ:** `main.py`-এর `main_loop` প্রতিনিয়ত ইভেন্টগুলো পর্যবেক্ষণ করে। যখন আপনি বোর্ডে ক্লিক করেন, তখন `pygame.MOUSEBUTTONDOWN` ট্রিগার হয়।
2.  **কোঅর্ডিনেট ম্যাপিং:** `get_cell_from_pos(event.pos)` ফাংশনটি আপনার মাউস ক্লিকের পিক্সেল পজিশনকে (যেমন: ২৫০, ৩০০) গ্রিড কোঅর্ডিনেটে (যেমন: সারি ৪, কলাম ৫) রূপান্তর করে।
3.  **চাল দেওয়ার অনুরোধ:** `go_logic.py`-এ `self.game.place_stone(r, c, BLACK)` কল করা হয়।
    - **বৈধতা যাচাই:** এটি প্রথমে `is_valid_move()` কল করে। এতে চেক করা হয়:
      - জায়গাটি খালি কি না?
      - **সুইসাইড রুল (Suicide Rule):** এই পাথরটি বসানোর ফলে পাথরটির কি কোনো 'liberty' বা নিঃশ্বাস নেওয়ার জায়গা থাকবে?
      - **কো রুল (Ko Rule):** এই চালটি কি বোর্ডের আগের কোনো অবস্থাকে পুনরাবৃত্তি করছে?
    - **চাল সম্পন্ন করা:** চাল বৈধ হলে বোর্ড আপডেট করা হয়: `self.board[r, c] = BLACK`।
    - **ক্যাপচার চেক:** এটি আশেপাশের ৪টি পাথর (উপরে, নিচে, বামে, ডানে) পরীক্ষা করে। যদি বিপক্ষ দলের পাথরের কোনো 'liberty' বা নিঃশ্বাস নেওয়ার জায়গা না থাকে (`get_liberties()` দিয়ে চেক করা হয়), তবে সেই পাথরগুলো বোর্ড থেকে সরিয়ে ফেলা হয়।
    - **পালা পরিবর্তন:** `self.current_player`-কে `WHITE`-এ সেট করা হয়।

### খ. এআই-এর চাল (সাদা পাথর)

1.  **পালা শনাক্তকরণ:** `main_loop` যখন দেখে `current_player == WHITE`, তখন এআই কাজ শুরু করে।
2.  **চিন্তার ধাপ:** `ai.py`-এ `ai.get_best_move(self.game)` কল করা হয়।
3.  **অনুসন্ধান (Minimax):**
    - এআই পরবর্তী ২ ধাপ পর্যন্ত চালগুলো পরীক্ষা করে। এটি প্রতিটি সম্ভাব্য চালকে ভার্চুয়ালি চালিয়ে দেখে।
    - **`clone_game()`:** প্রতিটি সিমুলেশনের জন্য এটি বোর্ডের একটি নকল তৈরি করে যাতে আসল গেমের কোনো ক্ষতি না হয়।
    - **`evaluate()`:** প্রতিটি সিমুলেটেড বোর্ডের জন্য এটি একটি স্কোর গণনা করে, যার ভিত্তি হলো:
      - বোর্ডে পাথরের সংখ্যা + দখল করা এলাকা (Territory)।
      - **লিবার্টি (Liberties):** পাথরের গ্রুপগুলো কতটা নিরাপদ বা তাদের নিঃশ্বাস নেওয়ার জায়গা কতটা।
    - **আলফা-বিটা প্রুনিং:** এটি অপ্রয়োজনীয় বা খারাপ চালগুলোর চিন্তা বাদ দিয়ে প্রসেসিং সময় বাঁচায়।
4.  **সিদ্ধান্ত:** এআই সবচেয়ে বেশি স্কোর পাওয়া কোঅর্ডিনেটটি নির্বাচন করে।
5.  **চাল প্রয়োগ:** `self.game.place_stone(r, c, WHITE)` কল করা হয় (ঠিক মানুষের চালের মতো একই লজিক ব্যবহার করে)।
6.  **পালা পরিবর্তন:** `self.current_player`-কে আবার `BLACK`-এ সেট করা হয়।

---

## ৩. গুরুত্বপূর্ণ ফাংশনসমূহ

### `go_logic.py`

| ফাংশন                      | ভূমিকা                                                                                                 |
| :------------------------- | :----------------------------------------------------------------------------------------------------- |
| `get_liberties(r, c)`      | একটি পাথরের গ্রুপের চারপাশে কতগুলো খালি জায়গা (liberties) আছে তা খুঁজে বের করে।                        |
| `place_stone(r, c, color)` | একটি চাল দেওয়ার মূল ফাংশন। এটি বৈধতা যাচাই, পাথর সংগ্রহ এবং পালা পরিবর্তন নিয়ন্ত্রণ করে।               |
| `is_valid_move(...)`       | এটি একজন রেফারির মতো কাজ করে। এটি গো গেমের আইনগুলো (Ko, Suicide) প্রয়োগ করে।                           |
| `get_territory()`          | বোর্ড স্ক্যান করে দেখে কোন খালি এলাকাগুলো কোন রঙের পাথর দিয়ে ঘেরা।                                     |
| `score()`                  | চূড়ান্ত স্কোর প্রদান করে: `পাথর সংখ্যা + দখল করা এলাকা + কোমি (সাদা পাথরের জন্য ৬.৫ পয়েন্ট অতিরিক্ত)`. |

### `ai.py`

| ফাংশন              | ভূমিকা                                                                                                                   |
| :----------------- | :----------------------------------------------------------------------------------------------------------------------- |
| `minimax(...)`     | একটি রিকার্সিভ ফাংশন যা ভবিষ্যতের সম্ভাব্য চালগুলোর একটি গাছ (tree) তৈরি করে।                                            |
| `evaluate(game)`   | এটি বিচারকের মতো কাজ করে। এটি নির্ধারণ করে যে বোর্ডের অবস্থা এআই-এর জন্য ভালো নাকি খারাপ।                                |
| `clone_game(game)` | এটি নিরাপত্তার জন্য অত্যন্ত জরুরি; এটি এআই-কে আসল বোর্ড পরিবর্তন না করেই ভবিষ্যতের চালগুলো নিয়ে "কল্পনা" করার সুযোগ দেয়। |

### `main.py`

| ফাংশন          | ভূমিকা                                                                                     |
| :------------- | :----------------------------------------------------------------------------------------- |
| `draw_board()` | বোর্ডের কাঠের টেক্সচার, গ্রিড লাইন, পাথর এবং "শেষ চাল" নির্দেশক রেন্ডার করে।               |
| `main_loop()`  | এটি গেমের হৃদপিণ্ড। এটি প্রতি সেকেন্ডে ৩০ বার (30 FPS) চলে এবং ইনপুট চেক ও ইউআই আপডেট করে। |

---

## ৪. সংক্ষেপে লজিক্যাল ফ্লো

`ইউজার ক্লিক` -> `main.py (GUI)` -> `go_logic.py (Rules)` -> `ক্যাপচার/স্কোর আপডেট` -> `ai.py (AI Thinking)` -> `go_logic.py (AI Move)` -> `UI আপডেট`|
